{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\JISHN\\\\Documents\\\\projects\\\\Chat App\\\\client\\\\src\\\\pages\\\\Avatar\\\\setAvatar.jsx\";\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { toast, ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport loader from '../../assets/loader.gif';\nimport styled from 'styled-components';\nimport axios from 'axios';\nimport { setAvatarRoute } from '../../utils/APIRoutes';\nimport { Buffer } from 'buffer';\nfunction SetAvatar() {\n  const navigate = useNavigate();\n  const api = \"https://api.multiavatar.com/4567565\";\n  const [avatars, setAvatars] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [selectedAvatar, setSelectedAvatar] = useState(undefined);\n  const toastOptions = {\n    position: \"bottom-right\",\n    autoClose: 5000,\n    hideProgressBar: false,\n    closeOnClick: true,\n    pauseOnHover: true,\n    draggable: true,\n    progress: 1,\n    theme: 'light'\n  };\n  useEffect(() => {\n    if (!localStorage.getItem(\"chat-app-user\")) {\n      navigate('/login');\n    }\n  }, []);\n  const setProfilePicture = async () => {\n    if (selectedAvatar === undefined) {\n      toast.error('Please select an avatar', toastOptions);\n      console.log('non selected avatar');\n    } else {\n      console.log('non selected avatar');\n      const user = JSON.parse(localStorage.getItem('chat-app-user'));\n      const {\n        data\n      } = await axios.post(`${setAvatarRoute}/${user._id}`, {\n        image: avatars[selectedAvatar]\n      }).then(respons => {\n        if (data.isSet) {\n          console.log(data);\n          user.isAvatarImageSet = true;\n          user.avatarImage = data.Image;\n          localStorage.setItem(\"chat-app-user\", JSON.stringify(user));\n          navigate('/');\n        } else {\n          toast.error('An error occurred.Please try again', toastOptions);\n        }\n      });\n    }\n  };\n  useEffect(() => {\n    const fetchAvatars = async () => {\n      const data = [];\n      for (let i = 0; i < 5; i++) {\n        const image = await axios.get(`${api}/${Math.round(Math.random() * 100)}`);\n        const buffer = new Buffer(image.data);\n        data.push(buffer.toString('base64'));\n      }\n      setAvatars(data);\n      setIsLoading(false);\n    };\n    fetchAvatars();\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 5\n    }\n  }, isLoading ? /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: loader,\n    alt: \"loader\",\n    className: \"loader\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  })) : /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"title-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 15\n    }\n  }, \"Pick an avatar as your profile picture\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"avatars\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, avatars.map((avatar, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: index,\n    className: `avatar ${selectedAvatar === index ? 'selected' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: `data:image/svg+xml;base64,${avatar}`,\n    alt: `Avatar ${index}`,\n    onClick: () => setSelectedAvatar(index),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 19\n    }\n  })))), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"submit-btn\",\n    onClick: setProfilePicture,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }, \"Set as profile picture\")), /*#__PURE__*/React.createElement(ToastContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }));\n}\nconst Container = styled.div`\ndisplay: flex;\njustify-content: center;\nalign-items: center;  // Fix the typo here\nflex-direction: column;\ngap: 3rem;\nbackground-color: #131324;\nheight: 100vh;\nwidth: 100vw;\n\n.loader {\n  max-inline-size: 100%;\n}\n\n.title-container {\n  h1 {\n    color: white;\n  }\n}\n\n.avatars {\n  display: flex;\n  gap: 2rem;\n\n  .avatar {\n    border: 0.4rem solid transparent;\n    padding: 0.4rem;\n    border-radius: 5rem;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    transition: 0.5s ease-in-out;\n\n    img {\n      height: 6rem;\n    }\n  }\n\n  .selected {\n    border: 0.4rem solid #4e0eff;\n  }\n}\n\n.submit-btn {\n  background-color: #997af0;\n  color: white;\n  padding: 1rem 2rem;\n  border: none;\n  font-weight: bold;\n  cursor: pointer;\n  border-radius: 0.4rem;\n  font-size: 1rem;\n  text-transform: uppercase;\n  transition: 0.5s ease-in-out;\n\n  &:hover {\n    background-color: #4e0eff;\n  }\n}\n`;\nexport default SetAvatar;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","toast","ToastContainer","loader","styled","axios","setAvatarRoute","Buffer","SetAvatar","navigate","api","avatars","setAvatars","isLoading","setIsLoading","selectedAvatar","setSelectedAvatar","undefined","toastOptions","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","theme","localStorage","getItem","setProfilePicture","error","console","log","user","JSON","parse","data","post","_id","image","then","respons","isSet","isAvatarImageSet","avatarImage","Image","setItem","stringify","fetchAvatars","i","get","Math","round","random","buffer","push","toString","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","Container","src","alt","className","map","avatar","index","key","onClick","div"],"sources":["C:/Users/JISHN/Documents/projects/Chat App/client/src/pages/Avatar/setAvatar.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { toast, ToastContainer } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport loader from '../../assets/loader.gif';\r\nimport styled from 'styled-components';\r\nimport axios from 'axios';\r\nimport { setAvatarRoute } from '../../utils/APIRoutes';\r\nimport { Buffer } from 'buffer';\r\n\r\nfunction SetAvatar() {\r\n  const navigate = useNavigate()\r\n  const api = \"https://api.multiavatar.com/4567565\";\r\n  const [avatars, setAvatars] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [selectedAvatar, setSelectedAvatar] = useState(undefined);\r\n  const toastOptions = {\r\n    position: \"bottom-right\",\r\n    autoClose: 5000,\r\n    hideProgressBar: false,\r\n    closeOnClick: true,\r\n    pauseOnHover: true,\r\n    draggable: true,\r\n    progress: 1,\r\n    theme: 'light',\r\n  };\r\n  useEffect(() => {\r\n    if (!localStorage.getItem(\"chat-app-user\")) {\r\n      navigate('/login')\r\n    }\r\n  }, [])\r\n\r\n  const setProfilePicture = async () => {\r\n\r\n    if (selectedAvatar === undefined) {\r\n      toast.error('Please select an avatar', toastOptions)\r\n      console.log('non selected avatar')\r\n    } else {\r\n      console.log('non selected avatar')\r\n      const user = JSON.parse(localStorage.getItem('chat-app-user'));\r\n      const { data } = await axios.post(`${setAvatarRoute}/${user._id}`, {\r\n        image: avatars[selectedAvatar],\r\n      }).then((respons) => {\r\n\r\n        if (data.isSet) {\r\n          console.log(data)\r\n          user.isAvatarImageSet = true;\r\n          user.avatarImage = data.Image;\r\n          localStorage.setItem(\"chat-app-user\", JSON.stringify(user));\r\n          navigate('/')\r\n        } else {\r\n          toast.error('An error occurred.Please try again', toastOptions)\r\n        }\r\n      })\r\n      \r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchAvatars = async () => {\r\n      const data = [];\r\n      for (let i = 0; i < 5; i++) {\r\n        const image = await axios.get(\r\n          `${api}/${Math.round(Math.random() * 100)}`\r\n        );\r\n        const buffer = new Buffer(image.data);\r\n        data.push(buffer.toString('base64'));\r\n      }\r\n      setAvatars(data);\r\n      setIsLoading(false);\r\n    };\r\n\r\n    fetchAvatars();\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n\r\n      {\r\n        isLoading ? <Container>\r\n          <img src={loader} alt=\"loader\" className='loader' />\r\n        </Container> : (\r\n\r\n\r\n          <Container>\r\n            <div className='title-container'>\r\n              <h1>Pick an avatar as your profile picture</h1>\r\n            </div>\r\n            <div className='avatars'>\r\n              {avatars.map((avatar, index) => (\r\n                <div key={index} className={`avatar ${selectedAvatar === index ? 'selected' : ''}`}>\r\n                  <img\r\n                    src={`data:image/svg+xml;base64,${avatar}`}\r\n                    alt={`Avatar ${index}`}\r\n                    onClick={() => setSelectedAvatar(index)}\r\n                  />\r\n                </div>\r\n              ))}\r\n            </div>\r\n            <button className='submit-btn' onClick={setProfilePicture}>Set as profile picture</button>\r\n          </Container>\r\n        )}\r\n      <ToastContainer />\r\n    </div>\r\n  );\r\n}\r\nconst Container = styled.div`\r\ndisplay: flex;\r\njustify-content: center;\r\nalign-items: center;  // Fix the typo here\r\nflex-direction: column;\r\ngap: 3rem;\r\nbackground-color: #131324;\r\nheight: 100vh;\r\nwidth: 100vw;\r\n\r\n.loader {\r\n  max-inline-size: 100%;\r\n}\r\n\r\n.title-container {\r\n  h1 {\r\n    color: white;\r\n  }\r\n}\r\n\r\n.avatars {\r\n  display: flex;\r\n  gap: 2rem;\r\n\r\n  .avatar {\r\n    border: 0.4rem solid transparent;\r\n    padding: 0.4rem;\r\n    border-radius: 5rem;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    transition: 0.5s ease-in-out;\r\n\r\n    img {\r\n      height: 6rem;\r\n    }\r\n  }\r\n\r\n  .selected {\r\n    border: 0.4rem solid #4e0eff;\r\n  }\r\n}\r\n\r\n.submit-btn {\r\n  background-color: #997af0;\r\n  color: white;\r\n  padding: 1rem 2rem;\r\n  border: none;\r\n  font-weight: bold;\r\n  cursor: pointer;\r\n  border-radius: 0.4rem;\r\n  font-size: 1rem;\r\n  text-transform: uppercase;\r\n  transition: 0.5s ease-in-out;\r\n\r\n  &:hover {\r\n    background-color: #4e0eff;\r\n  }\r\n}\r\n`;\r\n\r\nexport default SetAvatar;\r\n"],"mappings":"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AAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CACzC,CACE,CACN,CACE,CAAC,eACNlE,KAAA,CAAA4D,aAAA;IAAQU,SAAS,EAAC,YAAY;IAACK,OAAO,EAAE3C,iBAAkB;IAAA6B,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,wBAA8B,CAChF,CACZ,eACHlE,KAAA,CAAA4D,aAAA,CAACvD,cAAc;IAAAwD,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CACd,CAAC;AAEV;AACA,MAAMC,SAAS,GAAG5D,MAAM,CAACqE,GAAI;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAED,eAAejE,SAAS"},"metadata":{},"sourceType":"module"}